{% extends "admin/change_list.html" %}
{% load i18n %}

{% block content_title %}
    {{ block.super }}
    <br>
    <div style="margin-top:1em; padding:1em; background:#f9f9f9; border:1px solid #ddd;">
      <strong>Total Revenue:</strong> ₹{{ total_revenue|floatformat:2 }}<br>
      <strong>Total Orders:</strong> {{ total_orders }}<br>
      <br>
      <strong>By Genre:</strong>
      <table style="width:auto; margin-top:.5em; border-collapse: collapse;">
        <thead>
          <tr>
            <th style="border-bottom:1px solid #ccc; padding:4px; text-align:left;">Genre</th>
            <th style="border-bottom:1px solid #ccc; padding:4px; text-align:right;">Revenue</th>
            <th style="border-bottom:1px solid #ccc; padding:4px; text-align:right;"># Orders</th>
          </tr>
        </thead>
        <tbody>
          {% for g in genre_stats %}
          <tr>
            <td style="padding:4px;">{{ g.books__genres__name }}</td>
            <td style="padding:4px; text-align:right;">₹{{ g.revenue|floatformat:2 }}</td>
            <td style="padding:4px; text-align:right;">{{ g.orders }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
{% endblock %}
